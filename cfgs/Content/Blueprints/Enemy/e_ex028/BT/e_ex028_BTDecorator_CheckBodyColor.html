<!DOCTYPE html>
<html>
  <head>
    <style>
      window, html, body {
        border: 0;
        margin: 0;
        padding: 0;
      }
      body {
        overflow: scroll;
      }
      #minimap-container {
        position: fixed;
        top: 5vmin;
        right: 5vmin;

        outline: 2px solid black;
      }
      #minimap {
        max-width: 30vmin;
        max-height: 30vmin;

        display: block;

        pointer-events: none;
      }
      #minimap-view {
        position: absolute;
        box-sizing: border-box;
        left: 0%;
        top: 50%;

        pointer-events: none;

        outline: 2px solid black;
      }
      #map {
        transform-origin: top left;
      }
      #container {
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <div id="minimap-container">
      <img id="minimap"></img>
      <div id="minimap-view"></div>
    </div>
    <script type="text/javascript">
      const container = document.getElementById('container');
      const minimap = document.getElementById('minimap');
      const minimapView = document.getElementById('minimap-view');
      const minimapContainer = document.getElementById('minimap-container');

      const data = new TextDecoder().decode(Uint8Array.from(atob("PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iDQogImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDEyLjAuMCAoMjAyNDA3MDQuMDc1NCkNCiAtLT4NCjwhLS0gUGFnZXM6IDEgLS0+DQo8c3ZnIHdpZHRoPSIxMzIycHQiIGhlaWdodD0iMTEzNHB0Ig0KIHZpZXdCb3g9IjAuMDAgMC4wMCAxMzIxLjYyIDExMzMuNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InNjYWxlKDEgMSkgcm90YXRlKDApIHRyYW5zbGF0ZSg0IDExMjkuNSkiPg0KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSItNCw0IC00LC0xMTI5LjUgMTMxNy42MiwtMTEyOS41IDEzMTcuNjIsNCAtNCw0Ii8+DQo8IS0tIGVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQyAtLT4NCjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPmVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQzwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjODhmZjg4IiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjAsLTEwNjkuNzUgMCwtMTEyNSA1NTIuMjUsLTExMjUgNTUyLjI1LC0xMDY5Ljc1IDAsLTEwNjkuNzUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTExMDcuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+Q2xhc3NFeHBvcnQ6IGVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQzwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTEwOTEuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkFN1cGVyU3RydWN0OiBpbXBvcnQgL1NjcmlwdC9BSU1vZHVsZSYjNDU7Jmd0O0JURGVjb3JhdG9yX0JsdWVwcmludEJhc2U8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjgiIHk9Ii0xMDc2LjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkFByb3BlcnRpZXM6PC90ZXh0Pg0KPC9nPg0KPCEtLSBQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSSAtLT4NCjxnIGlkPSJub2RlMiIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPlBlcmZvcm1Db25kaXRpb25DaGVja0FJPC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNmZjg4ODgiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNTcwLjEyLC0xMDc5LjM4IDU3MC4xMiwtMTExNS4zOCA4NTAuMTIsLTExMTUuMzggODUwLjEyLC0xMDc5LjM4IDU3MC4xMiwtMTA3OS4zOCIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI1NzguMTIiIHk9Ii0xMDkyLjA4IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5GdW5jdGlvbiBQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSTwvdGV4dD4NCjwvZz4NCjwhLS0gUGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzAgLS0+DQo8ZyBpZD0ibm9kZTMiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5QZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMDwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE0NS4yNSwtODI2LjUgMTQ1LjI1LC05ODQuMjUgMTI3NSwtOTg0LjI1IDEyNzUsLTgyNi41IDE0NS4yNSwtODI2LjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjcxMC4xMiIgeT0iLTk2Ni45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+ZV9leDAyOF9CVERlY29yYXRvcl9DaGVja0JvZHlDb2xvcl9DOjpQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSTowPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTQ1LjI1LC05NjAuNSAxMjc1LC05NjAuNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNTMuMjUiIHk9Ii05NDMuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfTGV0T2JqPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNTMuMjUiIHk9Ii05MjcuNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0xvY2FsVmFyaWFibGUgZXhwb3J0IGVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQyYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJJiM0NTsmZ3Q7Q2FsbEZ1bmNfR2V0QmxhY2tib2FyZFZhbHVlQXNBY3Rvcl9SZXR1cm5WYWx1ZTwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTUzLjI1IiB5PSItOTExLjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0NvbnRleHQ8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE1My4yNSIgeT0iLTg5NS45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQRVhfT2JqZWN0Q29uc3QgaW1wb3J0IC9TY3JpcHQvQUlNb2R1bGUmIzQ1OyZndDtEZWZhdWx0X19CVEZ1bmN0aW9uTGlicmFyeTwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTUzLjI1IiB5PSItODgwLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkEVYX0ZpbmFsRnVuY3Rpb24gaW1wb3J0IC9TY3JpcHQvQUlNb2R1bGUmIzQ1OyZndDtCVEZ1bmN0aW9uTGlicmFyeSYjNDU7Jmd0O0dldEJsYWNrYm9hcmRWYWx1ZUFzQWN0b3I8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE1My4yNSIgeT0iLTg2NC40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQRVhfU2VsZjwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTUzLjI1IiB5PSItODQ4LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkEVYX0luc3RhbmNlVmFyaWFibGUgZXhwb3J0IGVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQyYjNDU7Jmd0O0NoZWNrQWN0b3I8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE1My4yNSIgeT0iLTgzMi45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQUlZhbHVlID0gZXhwb3J0IGVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQyYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJJiM0NTsmZ3Q7Q2FsbEZ1bmNfR2V0QmxhY2tib2FyZFZhbHVlQXNBY3Rvcl9SZXR1cm5WYWx1ZTwvdGV4dD4NCjwvZz4NCjwhLS0gUGVyZm9ybUNvbmRpdGlvbkNoZWNrQUkmIzQ1OyZndDtQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMCAtLT4NCjxnIGlkPSJlZGdlMSIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPlBlcmZvcm1Db25kaXRpb25DaGVja0FJJiM0NTsmZ3Q7UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzA8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTcxMC4xMiwtMTA3OS4xOEM3MTAuMTIsLTEwNTkuOTggNzEwLjEyLC0xMDI3LjQxIDcxMC4xMiwtOTk1LjY5Ii8+DQo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI3MTMuNjMsLTk5Ni4wNSA3MTAuMTMsLTk4Ni4wNSA3MDYuNjMsLTk5Ni4wNSA3MTMuNjMsLTk5Ni4wNSIvPg0KPC9nPg0KPCEtLSBQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fNTIgLS0+DQo8ZyBpZD0ibm9kZTQiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5QZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fNTI8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMzcsLTY5My43NSAxMzcsLTc4OC41IDEyODMuMjUsLTc4OC41IDEyODMuMjUsLTY5My43NSAxMzcsLTY5My43NSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzEwLjEyIiB5PSItNzcxLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPmVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQzo6UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUk6NTI8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMzcsLTc2NC43NSAxMjgzLjI1LC03NjQuNzUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTQ1IiB5PSItNzQ3LjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9MZXQ8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE0NSIgeT0iLTczMS43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbFZhcmlhYmxlIGV4cG9ydCBlX2V4MDI4X0JURGVjb3JhdG9yX0NoZWNrQm9keUNvbG9yX0MmIzQ1OyZndDtQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSSYjNDU7Jmd0O0syTm9kZV9EeW5hbWljQ2FzdF9Bc1RyZXNfRW5lbXlfUGF3bl9FX0V4XzAyODwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTQ1IiB5PSItNzE1Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9EeW5hbWljQ2FzdCBpbXBvcnQgL1NjcmlwdC9UcmVzR2FtZSYjNDU7Jmd0O1RyZXNFbmVteVBhd25fZV9leDAyODwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTQ1IiB5PSItNzAwLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkEVYX0xvY2FsVmFyaWFibGUgZXhwb3J0IGVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQyYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJJiM0NTsmZ3Q7Q2FsbEZ1bmNfR2V0QmxhY2tib2FyZFZhbHVlQXNBY3Rvcl9SZXR1cm5WYWx1ZTwvdGV4dD4NCjwvZz4NCjwhLS0gUGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzAmIzQ1OyZndDtQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fNTIgLS0+DQo8ZyBpZD0iZWRnZTIiIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5QZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMCYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJX181MjwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNNzEwLjEyLC04MjYuMUM3MTAuMTIsLTgxNy4zIDcxMC4xMiwtODA4LjQ1IDcxMC4xMiwtNzk5Ljk3Ii8+DQo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI3MTMuNjMsLTgwMC4yIDcxMC4xMywtNzkwLjIgNzA2LjYzLC04MDAuMiA3MTMuNjMsLTgwMC4yIi8+DQo8L2c+DQo8IS0tIFBlcmZvcm1Db25kaXRpb25DaGVja0FJX184OCAtLT4NCjxnIGlkPSJub2RlNSIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPlBlcmZvcm1Db25kaXRpb25DaGVja0FJX184ODwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE0MS4xMiwtNTYxIDE0MS4xMiwtNjU1Ljc1IDEyNzkuMTIsLTY1NS43NSAxMjc5LjEyLC01NjEgMTQxLjEyLC01NjEiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjcxMC4xMiIgeT0iLTYzOC40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+ZV9leDAyOF9CVERlY29yYXRvcl9DaGVja0JvZHlDb2xvcl9DOjpQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSTo4ODwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE0MS4xMiwtNjMyIDEyNzkuMTIsLTYzMiIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNDkuMTIiIHk9Ii02MTQuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfTGV0PC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNDkuMTIiIHk9Ii01OTguOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0xvY2FsVmFyaWFibGUgZXhwb3J0IGVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQyYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJJiM0NTsmZ3Q7SzJOb2RlX0R5bmFtaWNDYXN0X2JTdWNjZXNzPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNDkuMTIiIHk9Ii01ODMuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfUHJpbWl0aXZlQ2FzdCBPYmplY3RUb0Jvb2w8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE0OS4xMiIgeT0iLTU2Ny40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQRVhfTG9jYWxWYXJpYWJsZSBleHBvcnQgZV9leDAyOF9CVERlY29yYXRvcl9DaGVja0JvZHlDb2xvcl9DJiM0NTsmZ3Q7UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUkmIzQ1OyZndDtLMk5vZGVfRHluYW1pY0Nhc3RfQXNUcmVzX0VuZW15X1Bhd25fRV9FeF8wMjg8L3RleHQ+DQo8L2c+DQo8IS0tIFBlcmZvcm1Db25kaXRpb25DaGVja0FJX181MiYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJX184OCAtLT4NCjxnIGlkPSJlZGdlMyIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPlBlcmZvcm1Db25kaXRpb25DaGVja0FJX181MiYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJX184ODwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNNzEwLjEyLC02OTMuMjlDNzEwLjEyLC02ODQuODMgNzEwLjEyLC02NzUuOTIgNzEwLjEyLC02NjcuMiIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzEzLjYzLC02NjcuNCA3MTAuMTMsLTY1Ny40IDcwNi42MywtNjY3LjQgNzEzLjYzLC02NjcuNCIvPg0KPC9nPg0KPCEtLSBQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMTE3IC0tPg0KPGcgaWQ9Im5vZGU2IiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzExNzwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjIyMy42MiwtNDU5Ljc1IDIyMy42MiwtNTIzIDExOTYuNjIsLTUyMyAxMTk2LjYyLC00NTkuNzUgMjIzLjYyLC00NTkuNzUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjcxMC4xMiIgeT0iLTUwNS43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5lX2V4MDI4X0JURGVjb3JhdG9yX0NoZWNrQm9keUNvbG9yX0M6OlBlcmZvcm1Db25kaXRpb25DaGVja0FJOjExNzwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjIyMy42MiwtNDk5LjI1IDExOTYuNjIsLTQ5OS4yNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIyMzEuNjIiIHk9Ii00ODEuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVYX0p1bXBJZk5vdCAyMDE8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjIzMS42MiIgeT0iLTQ2Ni4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbFZhcmlhYmxlIGV4cG9ydCBlX2V4MDI4X0JURGVjb3JhdG9yX0NoZWNrQm9keUNvbG9yX0MmIzQ1OyZndDtQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSSYjNDU7Jmd0O0syTm9kZV9EeW5hbWljQ2FzdF9iU3VjY2VzczwvdGV4dD4NCjwvZz4NCjwhLS0gUGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzg4JiM0NTsmZ3Q7UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzExNyAtLT4NCjxnIGlkPSJlZGdlNCIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPlBlcmZvcm1Db25kaXRpb25DaGVja0FJX184OCYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJX18xMTc8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTcxMC4xMiwtNTYwLjZDNzEwLjEyLC01NTIuMDYgNzEwLjEyLC01NDMuMiA3MTAuMTIsLTUzNC44Ii8+DQo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI3MTMuNjMsLTUzNC44MiA3MTAuMTMsLTUyNC44MiA3MDYuNjMsLTUzNC44MiA3MTMuNjMsLTUzNC44MiIvPg0KPC9nPg0KPCEtLSBQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMTMxIC0tPg0KPGcgaWQ9Im5vZGU3IiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzEzMTwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjU4LjEyLC0yNjUgNTguMTIsLTQwNyAxMTk2LjEyLC00MDcgMTE5Ni4xMiwtMjY1IDU4LjEyLC0yNjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjYyNy4xMiIgeT0iLTM4OS43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5lX2V4MDI4X0JURGVjb3JhdG9yX0NoZWNrQm9keUNvbG9yX0M6OlBlcmZvcm1Db25kaXRpb25DaGVja0FJOjEzMTwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjU4LjEyLC0zODMuMjUgMTE5Ni4xMiwtMzgzLjI1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjY2LjEyIiB5PSItMzY1Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9MZXRCb29sPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI2Ni4xMiIgeT0iLTM1MC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbFZhcmlhYmxlIGV4cG9ydCBlX2V4MDI4X0JURGVjb3JhdG9yX0NoZWNrQm9keUNvbG9yX0MmIzQ1OyZndDtQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSSYjNDU7Jmd0O0NhbGxGdW5jX2lzQm9keUNvbG9yX1JldHVyblZhbHVlPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI2Ni4xMiIgeT0iLTMzNC40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfQ29udGV4dDwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNjYuMTIiIHk9Ii0zMTguNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQRVhfTG9jYWxWYXJpYWJsZSBleHBvcnQgZV9leDAyOF9CVERlY29yYXRvcl9DaGVja0JvZHlDb2xvcl9DJiM0NTsmZ3Q7UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUkmIzQ1OyZndDtLMk5vZGVfRHluYW1pY0Nhc3RfQXNUcmVzX0VuZW15X1Bhd25fRV9FeF8wMjg8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjY2LjEyIiB5PSItMzAyLjk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJDilJzilJDilJzilJBFWF9GaW5hbEZ1bmN0aW9uIGltcG9ydCAvU2NyaXB0L1RyZXNHYW1lJiM0NTsmZ3Q7VHJlc0VuZW15UGF3bl9lX2V4MDI4JiM0NTsmZ3Q7aXNCb2R5Q29sb3I8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjY2LjEyIiB5PSItMjg3LjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkEVYX0luc3RhbmNlVmFyaWFibGUgZXhwb3J0IGVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQyYjNDU7Jmd0O0NoZWNrQm9keUNvbG9yPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI2Ni4xMiIgeT0iLTI3MS40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQUlZhbHVlID0gZXhwb3J0IGVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQyYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJJiM0NTsmZ3Q7Q2FsbEZ1bmNfaXNCb2R5Q29sb3JfUmV0dXJuVmFsdWU8L3RleHQ+DQo8L2c+DQo8IS0tIFBlcmZvcm1Db25kaXRpb25DaGVja0FJX18xMTcmIzQ1OyZndDtQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMTMxIC0tPg0KPGcgaWQ9ImVkZ2U2IiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzExNyYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJX18xMzE8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTY5My4zMywtNDU5LjM0QzY4Ni42NSwtNDQ2Ljk5IDY3OC42MiwtNDMyLjE1IDY3MC40OSwtNDE3LjE0Ii8+DQo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI2NzMuNzEsLTQxNS43NCA2NjUuODgsLTQwOC42MSA2NjcuNTYsLTQxOS4wNyA2NzMuNzEsLTQxNS43NCIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjkyLjM4IiB5PSItNDI3Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5JRjwvdGV4dD4NCjwvZz4NCjwhLS0gUGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzIwMSAtLT4NCjxnIGlkPSJub2RlOSIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPlBlcmZvcm1Db25kaXRpb25DaGVja0FJX18yMDE8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI1OTAuNSwtMC41IDU5MC41LC03OS41IDEzMDcuNzUsLTc5LjUgMTMwNy43NSwtMC41IDU5MC41LC0wLjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9Ijk0OS4xMiIgeT0iLTYyLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPmVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQzo6UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUk6MjAxPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNTkwLjUsLTU1Ljc1IDEzMDcuNzUsLTU1Ljc1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjU5OC41IiB5PSItMzguNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVYX1JldHVybjwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNTk4LjUiIHk9Ii0yMi43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbE91dFZhcmlhYmxlPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI1OTguNSIgeT0iLTYuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkGV4cG9ydCBlX2V4MDI4X0JURGVjb3JhdG9yX0NoZWNrQm9keUNvbG9yX0MmIzQ1OyZndDtQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSSYjNDU7Jmd0O1JldHVyblZhbHVlPC90ZXh0Pg0KPC9nPg0KPCEtLSBQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMTE3JiM0NTsmZ3Q7UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzIwMSAtLT4NCjxnIGlkPSJlZGdlNSIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPlBlcmZvcm1Db25kaXRpb25DaGVja0FJX18xMTc6ZSYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJX18yMDE8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZWQiIGQ9Ik0xMTk3LjYyLC00OTEuMzhDMTM2NC4wNSwtNDkxLjM4IDEyOTUuMiwtMjQ2LjA2IDExOTAuMTIsLTExNyAxMTgwLjIxLC0xMDQuODIgMTE2OC4zNSwtOTQuNTYgMTE1NS4yOCwtODUuOTIiLz4NCjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0icmVkIiBwb2ludHM9IjExNTcuMiwtODIuOTkgMTE0Ni44NiwtODAuNyAxMTUzLjUyLC04OC45NCAxMTU3LjIsLTgyLjk5Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMjg4Ljg4IiB5PSItMjMzLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPklGIE5PVDwvdGV4dD4NCjwvZz4NCjwhLS0gUGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzE4MiAtLT4NCjxnIGlkPSJub2RlOCIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPlBlcmZvcm1Db25kaXRpb25DaGVja0FJX18xODI8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNjcsLTExNy41IDE2NywtMjEyLjI1IDExODEuMjUsLTIxMi4yNSAxMTgxLjI1LC0xMTcuNSAxNjcsLTExNy41Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI2NzQuMTIiIHk9Ii0xOTQuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPmVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQzo6UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUk6MTgyPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTY3LC0xODguNSAxMTgxLjI1LC0xODguNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNzUiIHk9Ii0xNzEuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfTGV0Qm9vbDwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTc1IiB5PSItMTU1LjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbE91dFZhcmlhYmxlPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNzUiIHk9Ii0xMzkuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQZXhwb3J0IGVfZXgwMjhfQlREZWNvcmF0b3JfQ2hlY2tCb2R5Q29sb3JfQyYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJJiM0NTsmZ3Q7UmV0dXJuVmFsdWU8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE3NSIgeT0iLTEyMy45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfTG9jYWxWYXJpYWJsZSBleHBvcnQgZV9leDAyOF9CVERlY29yYXRvcl9DaGVja0JvZHlDb2xvcl9DJiM0NTsmZ3Q7UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUkmIzQ1OyZndDtDYWxsRnVuY19pc0JvZHlDb2xvcl9SZXR1cm5WYWx1ZTwvdGV4dD4NCjwvZz4NCjwhLS0gUGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzEzMSYjNDU7Jmd0O1BlcmZvcm1Db25kaXRpb25DaGVja0FJX18xODIgLS0+DQo8ZyBpZD0iZWRnZTciIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5QZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMTMxJiM0NTsmZ3Q7UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzE4MjwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNNjQ2LjY1LC0yNjQuNzVDNjUwLjQ3LC0yNTAuOTkgNjU0LjQ0LC0yMzYuNzEgNjU4LjEzLC0yMjMuNDMiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjY2MS40NSwtMjI0LjU3IDY2MC43NSwtMjE0IDY1NC43LC0yMjIuNyA2NjEuNDUsLTIyNC41NyIvPg0KPC9nPg0KPCEtLSBQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMTgyJiM0NTsmZ3Q7UGVyZm9ybUNvbmRpdGlvbkNoZWNrQUlfXzIwMSAtLT4NCjxnIGlkPSJlZGdlOCIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPlBlcmZvcm1Db25kaXRpb25DaGVja0FJX18xODImIzQ1OyZndDtQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMjAxPC90aXRsZT4NCjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik03NzguODgsLTExNy4wN0M4MDIuODEsLTEwNi4zOCA4MjguMTQsLTk1LjA2IDg1MS43NSwtODQuNTEiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijg1My4wMiwtODcuNzcgODYwLjczLC04MC41IDg1MC4xNywtODEuMzggODUzLjAyLC04Ny43NyIvPg0KPC9nPg0KPCEtLSBQZXJmb3JtQ29uZGl0aW9uQ2hlY2tBSV9fMjExIC0tPg0KPGcgaWQ9Im5vZGUxMCIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPlBlcmZvcm1Db25kaXRpb25DaGVja0FJX18yMTE8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI3MjUsLTEwMDMuMjUgNzI1LC0xMDUwLjc1IDEyNzcuMjUsLTEwNTAuNzUgMTI3Ny4yNSwtMTAwMy4yNSA3MjUsLTEwMDMuMjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEwMDEuMTIiIHk9Ii0xMDMzLjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5lX2V4MDI4X0JURGVjb3JhdG9yX0NoZWNrQm9keUNvbG9yX0M6OlBlcmZvcm1Db25kaXRpb25DaGVja0FJOjIxMTwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjcyNSwtMTAyNyAxMjc3LjI1LC0xMDI3Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjczMyIgeT0iLTEwMDkuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfRW5kT2ZTY3JpcHQ8L3RleHQ+DQo8L2c+DQo8L2c+DQo8L3N2Zz4NCg=="), m => m.codePointAt(0)));
      container.innerHTML = data.substring(data.indexOf("<svg"));
      const map = container.children[0];
      minimap.src = URL.createObjectURL(new Blob([data], {'type':'image/svg+xml'}));

      function setScale(s) {
        map.style.scale = s;
        map.style.transformOrigin = '0 0';
        const bounds = map.getBoundingClientRect();
        container.style.width = bounds.width + 'px';
        container.style.height = bounds.height + 'px';
        update();
      }

      function zoom(amount, pointX, pointY) {
        const currentScale = +map.style.scale;
        const newScale = currentScale * amount;

        const currentScrollX = window.scrollX;
        const currentScrollY = window.scrollY;

        map.style.scale = newScale;
        const bounds = map.getBoundingClientRect();
        container.style.width = bounds.width + 'px';
        container.style.height = bounds.height + 'px';

        window.scrollTo(pointX * amount - (pointX - currentScrollX), pointY * amount - (pointY - currentScrollY));
        update();
      }
      function scroll(dx, dy) {
        window.scrollBy(dx, dy);
        update();
      }
      function handleMove(e) {
        if (!drag) return;
        if (drag === minimapContainer) {
          const bounds = minimap.getBoundingClientRect();

          scroll(
            document.documentElement.scrollWidth * e.movementX / bounds.width,
            document.documentElement.scrollHeight * e.movementY / bounds.height
          );
        } else {
          scroll(-e.movementX, -e.movementY);
        }
        e.preventDefault();
      }

      let debounceTimeout = null;
      function update() {
        minimapView.style.top = document.documentElement.scrollTop / document.documentElement.scrollHeight * 100 + '%';
        minimapView.style.left = document.documentElement.scrollLeft / document.documentElement.scrollWidth * 100 + '%';
        minimapView.style.width = document.documentElement.clientWidth / document.documentElement.scrollWidth * 100 + '%';
        minimapView.style.height = document.documentElement.clientHeight / document.documentElement.scrollHeight * 100 + '%';
      }

      let drag = false;

      function init() {
        setScale(1);
        const bounds = map.getBoundingClientRect();
        const scaleW = document.documentElement.clientWidth / bounds.width;
        const scaleH = document.documentElement.clientHeight / bounds.height;
        const maxAspectRatio = 0.2;
        const scale = Math.min(Math.max(maxAspectRatio, scaleW / scaleH) * scaleH, Math.max(maxAspectRatio, scaleH / scaleW) * scaleW);
        setScale(Math.min(scale, 1));
      }

      window.addEventListener('wheel', e => {
        e.preventDefault();
        zoom(e.deltaY > 0 ? (1 / 1.1) : 1.1, e.pageX, e.pageY);
      }, {passive: false});

      window.addEventListener('mousedown', e => {
        if (e.target && e.target.tagName === 'text') return;
        if (!(e.buttons & 1)) return;
        if (drag) return;
        drag = e.target || true;
      }, {passive: true});

      window.addEventListener('mouseup', e => {
        if (e.buttons & 1) return;
        drag = false;
      }, {passive: true});

      window.addEventListener('mousemove', e => {
        handleMove(e);
      }, {passive: false});

      window.addEventListener('scroll', () => {
        update();
      }, {passive: true});

      minimapContainer.addEventListener('mousedown', e => {
        e.preventDefault();
      }, {passive: false});

      window.addEventListener('hashchange', () => {
        load();
      }, {passive: true});

      init();
    </script>
  </body>
</html>


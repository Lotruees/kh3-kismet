<!DOCTYPE html>
<html>
  <head>
    <style>
      window, html, body {
        border: 0;
        margin: 0;
        padding: 0;
      }
      body {
        overflow: scroll;
      }
      #minimap-container {
        position: fixed;
        top: 5vmin;
        right: 5vmin;

        outline: 2px solid black;
      }
      #minimap {
        max-width: 30vmin;
        max-height: 30vmin;

        display: block;

        pointer-events: none;
      }
      #minimap-view {
        position: absolute;
        box-sizing: border-box;
        left: 0%;
        top: 50%;

        pointer-events: none;

        outline: 2px solid black;
      }
      #map {
        transform-origin: top left;
      }
      #container {
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <div id="minimap-container">
      <img id="minimap"></img>
      <div id="minimap-view"></div>
    </div>
    <script type="text/javascript">
      const container = document.getElementById('container');
      const minimap = document.getElementById('minimap');
      const minimapView = document.getElementById('minimap-view');
      const minimapContainer = document.getElementById('minimap-container');

      const data = new TextDecoder().decode(Uint8Array.from(atob("PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iDQogImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDEyLjAuMCAoMjAyNDA3MDQuMDc1NCkNCiAtLT4NCjwhLS0gUGFnZXM6IDEgLS0+DQo8c3ZnIHdpZHRoPSI5NDhwdCIgaGVpZ2h0PSIxMTk2cHQiDQogdmlld0JveD0iMC4wMCAwLjAwIDk0Ny42MiAxMTk1LjUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCjxnIGlkPSJncmFwaDAiIGNsYXNzPSJncmFwaCIgdHJhbnNmb3JtPSJzY2FsZSgxIDEpIHJvdGF0ZSgwKSB0cmFuc2xhdGUoNCAxMTkxLjUpIj4NCjxwb2x5Z29uIGZpbGw9IndoaXRlIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iLTQsNCAtNCwtMTE5MS41IDk0My42MiwtMTE5MS41IDk0My42Miw0IC00LDQiLz4NCjwhLS0gTG9vazJEX0MgLS0+DQo8ZyBpZD0ibm9kZTEiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5Mb29rMkRfQzwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjODhmZjg4IiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQ4LjUsLTExMzEuNzUgNDguNSwtMTE4NyA2MzMuNzUsLTExODcgNjMzLjc1LC0xMTMxLjc1IDQ4LjUsLTExMzEuNzUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNTYuNSIgeT0iLTExNjkuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+Q2xhc3NFeHBvcnQ6IExvb2syRF9DPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI1Ni41IiB5PSItMTE1My45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQU3VwZXJTdHJ1Y3Q6IGltcG9ydCAvR2FtZS9CbHVlcHJpbnRzL0ZpZWxkVm9pY2UvQmFzZS9CYXNpYyYjNDU7Jmd0O0Jhc2ljX0M8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjU2LjUiIHk9Ii0xMTM4LjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkFByb3BlcnRpZXM6PC90ZXh0Pg0KPC9nPg0KPCEtLSBFeGVjdXRlIC0tPg0KPGcgaWQ9Im5vZGUyIiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+RXhlY3V0ZTwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZmY4ODg4IiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjY1Mi4xMiwtMTE0MS4zOCA2NTIuMTIsLTExNzcuMzggODAwLjEyLC0xMTc3LjM4IDgwMC4xMiwtMTE0MS4zOCA2NTIuMTIsLTExNDEuMzgiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNjYwLjEyIiB5PSItMTE1NC4wOCIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RnVuY3Rpb24gRXhlY3V0ZTwvdGV4dD4NCjwvZz4NCjwhLS0gRXhlY3V0ZV9fMCAtLT4NCjxnIGlkPSJub2RlMyIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPkV4ZWN1dGVfXzA8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI2MTkuMTIsLTk5OC43NSA2MTkuMTIsLTEwNDYuMjUgODMzLjEyLC0xMDQ2LjI1IDgzMy4xMiwtOTk4Ljc1IDYxOS4xMiwtOTk4Ljc1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI3MjYuMTIiIHk9Ii0xMDI4Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5Mb29rMkRfQzo6RXhlY3V0ZTowPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNjE5LjEyLC0xMDIyLjUgODMzLjEyLC0xMDIyLjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNjI3LjEyIiB5PSItMTAwNS4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9QdXNoRXhlY3V0aW9uRmxvdyAxMzE8L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGUmIzQ1OyZndDtFeGVjdXRlX18wIC0tPg0KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+RXhlY3V0ZSYjNDU7Jmd0O0V4ZWN1dGVfXzA8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTcyNi4xMiwtMTE0MS4wMkM3MjYuMTIsLTExMjAuMTYgNzI2LjEyLC0xMDg0LjY3IDcyNi4xMiwtMTA1OC4xNCIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzI5LjYzLC0xMDU4LjE3IDcyNi4xMywtMTA0OC4xNyA3MjIuNjMsLTEwNTguMTcgNzI5LjYzLC0xMDU4LjE3Ii8+DQo8L2c+DQo8IS0tIEV4ZWN1dGVfXzUgLS0+DQo8ZyBpZD0ibm9kZTQiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5FeGVjdXRlX181PC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDk4LjEyLC05MTMuMjUgNDk4LjEyLC05NjAuNzUgNzEyLjEyLC05NjAuNzUgNzEyLjEyLC05MTMuMjUgNDk4LjEyLC05MTMuMjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjYwNS4xMiIgeT0iLTk0My40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+TG9vazJEX0M6OkV4ZWN1dGU6NTwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQ5OC4xMiwtOTM3IDcxMi4xMiwtOTM3Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjUwNi4xMiIgeT0iLTkxOS43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9QdXNoRXhlY3V0aW9uRmxvdyAxMjA8L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGVfXzAmIzQ1OyZndDtFeGVjdXRlX181IC0tPg0KPGcgaWQ9ImVkZ2UzIiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+RXhlY3V0ZV9fMCYjNDU7Jmd0O0V4ZWN1dGVfXzU8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTY5Mi43NCwtOTk4LjQ2QzY3OC44NSwtOTg4Ljg4IDY2Mi41NiwtOTc3LjY0IDY0Ny44MiwtOTY3LjQ3Ii8+DQo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI2NDkuODYsLTk2NC42MiA2MzkuNjUsLTk2MS44MiA2NDUuODksLTk3MC4zOCA2NDkuODYsLTk2NC42MiIvPg0KPC9nPg0KPCEtLSBFeGVjdXRlX18xMzEgLS0+DQo8ZyBpZD0ibm9kZTEyIiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+RXhlY3V0ZV9fMTMxPC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNTM1LC0wLjUgNTM1LC03OS41IDg4OS4yNSwtNzkuNSA4ODkuMjUsLTAuNSA1MzUsLTAuNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzEyLjEyIiB5PSItNjIuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+TG9vazJEX0M6OkV4ZWN1dGU6MTMxPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNTM1LC01NS43NSA4ODkuMjUsLTU1Ljc1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjU0MyIgeT0iLTM4LjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9SZXR1cm48L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjU0MyIgeT0iLTIyLjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0xvY2FsT3V0VmFyaWFibGU8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjU0MyIgeT0iLTYuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkGV4cG9ydCBMb29rMkRfQyYjNDU7Jmd0O0V4ZWN1dGUmIzQ1OyZndDtSZXR1cm5WYWx1ZTwvdGV4dD4NCjwvZz4NCjwhLS0gRXhlY3V0ZV9fMCYjNDU7Jmd0O0V4ZWN1dGVfXzEzMSAtLT4NCjxnIGlkPSJlZGdlMiIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPkV4ZWN1dGVfXzA6ZSYjNDU7Jmd0O0V4ZWN1dGVfXzEzMTwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9InJlZCIgZD0iTTgzNC4xMiwtMTAyMi41Qzg3My4wNSwtMTAyMi41IDg1Ny4xMiwtOTc2LjkyIDg1Ny4xMiwtOTM4IDg1Ny4xMiwtOTM4IDg1Ny4xMiwtOTM4IDg1Ny4xMiwtMTQwLjI1IDg1Ny4xMiwtMTE4LjE3IDg0NS41MywtMTAwLjY0IDgyOC45LC04Ni44NSIvPg0KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZWQiIHBvaW50cz0iODMxLjA5LC04NC4xMiA4MjAuOTksLTgwLjg5IDgyNi44NywtODkuNzEgODMxLjA5LC04NC4xMiIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iODk4LjM4IiB5PSItNDg2LjgyIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5QVVNIIFNUQUNLPC90ZXh0Pg0KPC9nPg0KPCEtLSBFeGVjdXRlX18xMCAtLT4NCjxnIGlkPSJub2RlNSIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPkV4ZWN1dGVfXzEwPC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMCwtNzgxLjUgMCwtODYwLjUgNjg0LjI1LC04NjAuNSA2ODQuMjUsLTc4MS41IDAsLTc4MS41Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzNDIuMTIiIHk9Ii04NDMuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+TG9vazJEX0M6OkV4ZWN1dGU6MTA8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIwLC04MzYuNzUgNjg0LjI1LC04MzYuNzUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTgxOS40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfTGV0Qm9vbDwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTgwMy43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbFZhcmlhYmxlIGV4cG9ydCBMb29rMkRfQyYjNDU7Jmd0O0V4ZWN1dGUmIzQ1OyZndDtDYWxsRnVuY19Jc0Jhc2ljQ29uZHRpb25fUmV0dXJuVmFsdWU8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjgiIHk9Ii03ODcuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX1ZpcnR1YWxGdW5jdGlvbiBJc0Jhc2ljQ29uZHRpb248L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGVfXzUmIzQ1OyZndDtFeGVjdXRlX18xMCAtLT4NCjxnIGlkPSJlZGdlNSIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPkV4ZWN1dGVfXzUmIzQ1OyZndDtFeGVjdXRlX18xMDwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNNTUxLjU5LC05MTIuNzlDNTIwLjE1LC04OTkuMTcgNDc5LjQxLC04ODEuNTEgNDQyLjIyLC04NjUuMzkiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQ0My44LC04NjIuMjYgNDMzLjIzLC04NjEuNDkgNDQxLjAxLC04NjguNjggNDQzLjgsLTg2Mi4yNiIvPg0KPC9nPg0KPCEtLSBFeGVjdXRlX18xMjAgLS0+DQo8ZyBpZD0ibm9kZTExIiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+RXhlY3V0ZV9fMTIwPC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDg4LC02NjcuNzUgNDg4LC03NjIuNSA4NDIuMjUsLTc2Mi41IDg0Mi4yNSwtNjY3Ljc1IDQ4OCwtNjY3Ljc1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI2NjUuMTIiIHk9Ii03NDUuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+TG9vazJEX0M6OkV4ZWN1dGU6MTIwPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDg4LC03MzguNzUgODQyLjI1LC03MzguNzUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNDk2IiB5PSItNzIxLjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9MZXRCb29sPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI0OTYiIHk9Ii03MDUuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfTG9jYWxPdXRWYXJpYWJsZTwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNDk2IiB5PSItNjg5Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJDilJzilJDilJzilJBleHBvcnQgTG9vazJEX0MmIzQ1OyZndDtFeGVjdXRlJiM0NTsmZ3Q7UmV0dXJuVmFsdWU8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjQ5NiIgeT0iLTY3NC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9GYWxzZTwvdGV4dD4NCjwvZz4NCjwhLS0gRXhlY3V0ZV9fNSYjNDU7Jmd0O0V4ZWN1dGVfXzEyMCAtLT4NCjxnIGlkPSJlZGdlNCIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPkV4ZWN1dGVfXzU6ZSYjNDU7Jmd0O0V4ZWN1dGVfXzEyMDwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9InJlZCIgZD0iTTcxMy4xMiwtOTM3Qzc4MC4zMSwtOTM3IDczNi4xNiwtODM4LjIxIDY5OS41NCwtNzcyLjc2Ii8+DQo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9InJlZCIgcG9pbnRzPSI3MDIuNzEsLTc3MS4yNSA2OTQuNzMsLTc2NC4yOCA2OTYuNjIsLTc3NC43MSA3MDIuNzEsLTc3MS4yNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzg4LjM4IiB5PSItODgxLjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5QVVNIIFNUQUNLPC90ZXh0Pg0KPC9nPg0KPCEtLSBFeGVjdXRlX18zNCAtLT4NCjxnIGlkPSJub2RlNiIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPkV4ZWN1dGVfXzM0PC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMCwtNTg1LjUgMCwtNjQ4Ljc1IDY4NC4yNSwtNjQ4Ljc1IDY4NC4yNSwtNTg1LjUgMCwtNTg1LjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjM0Mi4xMiIgeT0iLTYzMS40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+TG9vazJEX0M6OkV4ZWN1dGU6MzQ8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIwLC02MjUgNjg0LjI1LC02MjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTYwNy43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9Qb3BFeGVjdXRpb25GbG93SWZOb3Q8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjgiIHk9Ii01OTEuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0xvY2FsVmFyaWFibGUgZXhwb3J0IExvb2syRF9DJiM0NTsmZ3Q7RXhlY3V0ZSYjNDU7Jmd0O0NhbGxGdW5jX0lzQmFzaWNDb25kdGlvbl9SZXR1cm5WYWx1ZTwvdGV4dD4NCjwvZz4NCjwhLS0gRXhlY3V0ZV9fMTAmIzQ1OyZndDtFeGVjdXRlX18zNCAtLT4NCjxnIGlkPSJlZGdlNiIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPkV4ZWN1dGVfXzEwJiM0NTsmZ3Q7RXhlY3V0ZV9fMzQ8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTM0Mi4xMiwtNzgxLjA4QzM0Mi4xMiwtNzQ2LjQ5IDM0Mi4xMiwtNjk2LjA0IDM0Mi4xMiwtNjYwLjQ2Ii8+DQo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIzNDUuNjMsLTY2MC41MiAzNDIuMTMsLTY1MC41MiAzMzguNjMsLTY2MC41MiAzNDUuNjMsLTY2MC41MiIvPg0KPC9nPg0KPCEtLSBFeGVjdXRlX180NCAtLT4NCjxnIGlkPSJub2RlNyIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPkV4ZWN1dGVfXzQ0PC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTA4Ljg4LC00MzcgMTA4Ljg4LC01NDcuNSA2NjkuMzgsLTU0Ny41IDY2OS4zOCwtNDM3IDEwOC44OCwtNDM3Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzODkuMTIiIHk9Ii01MzAuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+TG9vazJEX0M6OkV4ZWN1dGU6NDQ8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMDguODgsLTUyMy43NSA2NjkuMzgsLTUyMy43NSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMTYuODgiIHk9Ii01MDYuNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVYX1ZpcnR1YWxGdW5jdGlvbiBJc0xvb2syRDwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTE2Ljg4IiB5PSItNDkwLjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0luc3RhbmNlVmFyaWFibGUgZXhwb3J0IExvb2syRF9DJiM0NTsmZ3Q7VGFyZ2V0PC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMTYuODgiIHk9Ii00NzQuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0luc3RhbmNlVmFyaWFibGUgZXhwb3J0IExvb2syRF9DJiM0NTsmZ3Q7QW5nbGU8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjExNi44OCIgeT0iLTQ1OS4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9JbnN0YW5jZVZhcmlhYmxlIGV4cG9ydCBMb29rMkRfQyYjNDU7Jmd0O0luUmF0ZTwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTE2Ljg4IiB5PSItNDQzLjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Mb2NhbFZhcmlhYmxlIGV4cG9ydCBMb29rMkRfQyYjNDU7Jmd0O0V4ZWN1dGUmIzQ1OyZndDtDYWxsRnVuY19Jc0xvb2syRF9yZXQ8L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGVfXzM0JiM0NTsmZ3Q7RXhlY3V0ZV9fNDQgLS0+DQo8ZyBpZD0iZWRnZTciIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5FeGVjdXRlX18zNCYjNDU7Jmd0O0V4ZWN1dGVfXzQ0PC90aXRsZT4NCjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0zNTMuOTksLTU4NS4xMkMzNTcuMTUsLTU3Ni44NSAzNjAuNjgsLTU2Ny42MSAzNjQuMjYsLTU1OC4yNSIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMzY3LjQ2LC01NTkuNjkgMzY3Ljc2LC01NDkuMSAzNjAuOTIsLTU1Ny4xOCAzNjcuNDYsLTU1OS42OSIvPg0KPC9nPg0KPCEtLSBFeGVjdXRlX185NCAtLT4NCjxnIGlkPSJub2RlOCIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPkV4ZWN1dGVfXzk0PC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTA4Ljg4LC0zMzUuNzUgMTA4Ljg4LC0zOTkgNjY5LjM4LC0zOTkgNjY5LjM4LC0zMzUuNzUgMTA4Ljg4LC0zMzUuNzUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjM4OS4xMiIgeT0iLTM4MS43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5Mb29rMkRfQzo6RXhlY3V0ZTo5NDwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwOC44OCwtMzc1LjI1IDY2OS4zOCwtMzc1LjI1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjExNi44OCIgeT0iLTM1Ny45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfUG9wRXhlY3V0aW9uRmxvd0lmTm90PC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMTYuODgiIHk9Ii0zNDIuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfTG9jYWxWYXJpYWJsZSBleHBvcnQgTG9vazJEX0MmIzQ1OyZndDtFeGVjdXRlJiM0NTsmZ3Q7Q2FsbEZ1bmNfSXNMb29rMkRfcmV0PC90ZXh0Pg0KPC9nPg0KPCEtLSBFeGVjdXRlX180NCYjNDU7Jmd0O0V4ZWN1dGVfXzk0IC0tPg0KPGcgaWQ9ImVkZ2U4IiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+RXhlY3V0ZV9fNDQmIzQ1OyZndDtFeGVjdXRlX185NDwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMzg5LjEyLC00MzYuNjRDMzg5LjEyLC00MjcuOTMgMzg5LjEyLC00MTkuMDMgMzg5LjEyLC00MTAuNjYiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjM5Mi42MywtNDEwLjc2IDM4OS4xMywtNDAwLjc2IDM4NS42MywtNDEwLjc2IDM5Mi42MywtNDEwLjc2Ii8+DQo8L2c+DQo8IS0tIEV4ZWN1dGVfXzEwNCAtLT4NCjxnIGlkPSJub2RlOSIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPkV4ZWN1dGVfXzEwNDwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI0NywtMjAzIDI0NywtMjk3Ljc1IDYwMS4yNSwtMjk3Ljc1IDYwMS4yNSwtMjAzIDI0NywtMjAzIi8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0MjQuMTIiIHk9Ii0yODAuNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkxvb2syRF9DOjpFeGVjdXRlOjEwNDwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI0NywtMjc0IDYwMS4yNSwtMjc0Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjI1NSIgeT0iLTI1Ni43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9MZXRCb29sPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIyNTUiIHk9Ii0yNDAuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0xvY2FsT3V0VmFyaWFibGU8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjI1NSIgeT0iLTIyNS4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJDilJzilJDilJzilJBleHBvcnQgTG9vazJEX0MmIzQ1OyZndDtFeGVjdXRlJiM0NTsmZ3Q7UmV0dXJuVmFsdWU8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjI1NSIgeT0iLTIwOS40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfVHJ1ZTwvdGV4dD4NCjwvZz4NCjwhLS0gRXhlY3V0ZV9fOTQmIzQ1OyZndDtFeGVjdXRlX18xMDQgLS0+DQo8ZyBpZD0iZWRnZTkiIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5FeGVjdXRlX185NCYjNDU7Jmd0O0V4ZWN1dGVfXzEwNDwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMzk4LjYsLTMzNS4yNUM0MDEuMDcsLTMyNy4xMiA0MDMuODIsLTMxOC4wOSA0MDYuNTcsLTMwOS4wNSIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDA5LjkxLC0zMTAuMTEgNDA5LjQ3LC0yOTkuNTMgNDAzLjIxLC0zMDguMDggNDA5LjkxLC0zMTAuMTEiLz4NCjwvZz4NCjwhLS0gRXhlY3V0ZV9fMTE1IC0tPg0KPGcgaWQ9Im5vZGUxMCIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPkV4ZWN1dGVfXzExNTwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQ2Ny41LC0xMTcuNSA0NjcuNSwtMTY1IDY1Ni43NSwtMTY1IDY1Ni43NSwtMTE3LjUgNDY3LjUsLTExNy41Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1NjIuMTIiIHk9Ii0xNDcuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+TG9vazJEX0M6OkV4ZWN1dGU6MTE1PC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDY3LjUsLTE0MS4yNSA2NTYuNzUsLTE0MS4yNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI0NzUuNSIgeT0iLTEyMy45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfSnVtcCAxMzE8L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGVfXzEwNCYjNDU7Jmd0O0V4ZWN1dGVfXzExNSAtLT4NCjxnIGlkPSJlZGdlMTAiIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5FeGVjdXRlX18xMDQmIzQ1OyZndDtFeGVjdXRlX18xMTU8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTQ4NC4yNSwtMjAyLjdDNDk3LjU2LC0xOTIuMzcgNTExLjMyLC0xODEuNjggNTIzLjUxLC0xNzIuMjMiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjUyNS41MywtMTc1LjA5IDUzMS4yOSwtMTY2LjE5IDUyMS4yNCwtMTY5LjU2IDUyNS41MywtMTc1LjA5Ii8+DQo8L2c+DQo8IS0tIEV4ZWN1dGVfXzExNSYjNDU7Jmd0O0V4ZWN1dGVfXzEzMSAtLT4NCjxnIGlkPSJlZGdlMTEiIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5FeGVjdXRlX18xMTUmIzQ1OyZndDtFeGVjdXRlX18xMzE8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTU5Ni45MiwtMTE3LjIzQzYxMC45NSwtMTA3Ljk0IDYyNy42NSwtOTYuODkgNjQzLjkzLC04Ni4xMyIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNjQ1Ljc2LC04OS4xMSA2NTIuMTcsLTgwLjY3IDY0MS45LC04My4yNyA2NDUuNzYsLTg5LjExIi8+DQo8L2c+DQo8IS0tIEV4ZWN1dGVfXzEyMCYjNDU7Jmd0O0V4ZWN1dGVfXzEzMSAtLT4NCjxnIGlkPSJlZGdlMTIiIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5FeGVjdXRlX18xMjAmIzQ1OyZndDtFeGVjdXRlX18xMzE8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTY4OC4yMSwtNjY3LjI5QzcwMC4xLC02MzguOTcgNzEyLjEyLC02MDEuNzIgNzEyLjEyLC01NjcgNzEyLjEyLC01NjcgNzEyLjEyLC01NjcgNzEyLjEyLC0xNDAuMjUgNzEyLjEyLC0xMjQuMTcgNzEyLjEyLC0xMDYuNjIgNzEyLjEyLC05MC44MSIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzE1LjYzLC05MS4xNiA3MTIuMTMsLTgxLjE2IDcwOC42MywtOTEuMTYgNzE1LjYzLC05MS4xNiIvPg0KPC9nPg0KPCEtLSBFeGVjdXRlX18xNDEgLS0+DQo8ZyBpZD0ibm9kZTEzIiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+RXhlY3V0ZV9fMTQxPC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzQxLjUsLTEwNjUuMjUgNzQxLjUsLTExMTIuNzUgOTMwLjc1LC0xMTEyLjc1IDkzMC43NSwtMTA2NS4yNSA3NDEuNSwtMTA2NS4yNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iODM2LjEyIiB5PSItMTA5NS40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+TG9vazJEX0M6OkV4ZWN1dGU6MTQxPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzQxLjUsLTEwODkgOTMwLjc1LC0xMDg5Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9Ijc0OS41IiB5PSItMTA3MS43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9FbmRPZlNjcmlwdDwvdGV4dD4NCjwvZz4NCjwvZz4NCjwvc3ZnPg0K"), m => m.codePointAt(0)));
      container.innerHTML = data.substring(data.indexOf("<svg"));
      const map = container.children[0];
      minimap.src = URL.createObjectURL(new Blob([data], {'type':'image/svg+xml'}));

      function setScale(s) {
        map.style.scale = s;
        map.style.transformOrigin = '0 0';
        const bounds = map.getBoundingClientRect();
        container.style.width = bounds.width + 'px';
        container.style.height = bounds.height + 'px';
        update();
      }

      function zoom(amount, pointX, pointY) {
        const currentScale = +map.style.scale;
        const newScale = currentScale * amount;

        const currentScrollX = window.scrollX;
        const currentScrollY = window.scrollY;

        map.style.scale = newScale;
        const bounds = map.getBoundingClientRect();
        container.style.width = bounds.width + 'px';
        container.style.height = bounds.height + 'px';

        window.scrollTo(pointX * amount - (pointX - currentScrollX), pointY * amount - (pointY - currentScrollY));
        update();
      }
      function scroll(dx, dy) {
        window.scrollBy(dx, dy);
        update();
      }
      function handleMove(e) {
        if (!drag) return;
        if (drag === minimapContainer) {
          const bounds = minimap.getBoundingClientRect();

          scroll(
            document.documentElement.scrollWidth * e.movementX / bounds.width,
            document.documentElement.scrollHeight * e.movementY / bounds.height
          );
        } else {
          scroll(-e.movementX, -e.movementY);
        }
        e.preventDefault();
      }

      let debounceTimeout = null;
      function update() {
        minimapView.style.top = document.documentElement.scrollTop / document.documentElement.scrollHeight * 100 + '%';
        minimapView.style.left = document.documentElement.scrollLeft / document.documentElement.scrollWidth * 100 + '%';
        minimapView.style.width = document.documentElement.clientWidth / document.documentElement.scrollWidth * 100 + '%';
        minimapView.style.height = document.documentElement.clientHeight / document.documentElement.scrollHeight * 100 + '%';
      }

      let drag = false;

      function init() {
        setScale(1);
        const bounds = map.getBoundingClientRect();
        const scaleW = document.documentElement.clientWidth / bounds.width;
        const scaleH = document.documentElement.clientHeight / bounds.height;
        const maxAspectRatio = 0.2;
        const scale = Math.min(Math.max(maxAspectRatio, scaleW / scaleH) * scaleH, Math.max(maxAspectRatio, scaleH / scaleW) * scaleW);
        setScale(Math.min(scale, 1));
      }

      window.addEventListener('wheel', e => {
        e.preventDefault();
        zoom(e.deltaY > 0 ? (1 / 1.1) : 1.1, e.pageX, e.pageY);
      }, {passive: false});

      window.addEventListener('mousedown', e => {
        if (e.target && e.target.tagName === 'text') return;
        if (!(e.buttons & 1)) return;
        if (drag) return;
        drag = e.target || true;
      }, {passive: true});

      window.addEventListener('mouseup', e => {
        if (e.buttons & 1) return;
        drag = false;
      }, {passive: true});

      window.addEventListener('mousemove', e => {
        handleMove(e);
      }, {passive: false});

      window.addEventListener('scroll', () => {
        update();
      }, {passive: true});

      minimapContainer.addEventListener('mousedown', e => {
        e.preventDefault();
      }, {passive: false});

      window.addEventListener('hashchange', () => {
        load();
      }, {passive: true});

      init();
    </script>
  </body>
</html>

